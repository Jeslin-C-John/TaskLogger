@model List<TaskLogger.Models.Task>
@{
    Layout = "~/Views/Shared/_LayoutLogout.cshtml";
}
@{
    ViewBag.Title = "View";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>

<script src="https://code.jquery.com/jquery-1.10.0.min.js"
        integrity="sha256-2+LznWeWgL7AJ1ciaIG5rFP7GKemzzl+K75tRyTByOE="
        crossorigin="anonymous"></script>

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.2/moment.min.js"></script>
<script src="https://cdn.datatables.net/datetime/1.2.0/js/dataTables.dateTime.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/datetime/1.2.0/css/dataTables.dateTime.min.css">







<center>
    <h1>Home</h1>
    @*<input class="btn btn-danger btn-sm float-right" type="button" value="Logout" onclick="location.href = '/Login/Index'" />*@

    <br />

    <input class="btn btn-primary btn-sm float-left" type="button" value="Add Task" onclick="location.href = '/Add/Index'" />
    <br /><br />
    <input class="btn btn-primary btn-sm float-left" type="button" value="Reset All Filters" onclick="location.href = '/View/Index'" />
    <hr />
    <hr />
    @*<input class="btn btn-primary btn-sm float-left" type="button" value="Filter By Date" onclick="location.href = '/Filter/Index'" />*@
</center>

<br />
<br />
<table border="0" cellspacing="5" cellpadding="5">
    <tbody>
        <tr>
            <td>Minimum date:</td>
            <td><input type="text" id="min" name="min"></td>
        </tr>
        <tr>
            <td>Maximum date:</td>
            <td><input type="text" id="max" name="max"></td>
        </tr>
    </tbody>
</table>

<center>
    <table id="view" style="table-layout: fixed; width: 100% !important;">
        <thead>
            <tr>
                <th>Task ID</th>
                <th>Date</th>
                <th>Hours</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>




        @*<tbody>
        @{ int count = 1;}
        @foreach (var instance in Model)
        {
            
            <tr class="sacss">
                <td>@instance.Taskid</td>
                <td>@instance.ShortDate</td>
                <td>@instance.Hours</td>
                <td>@instance.StringStatus</td>
                <td class="datatable-ct">
                    <div class="button-ap-list responsive-btn">
                        <div class="btn-group btn-custom-groups" style="margin-left:26%">
                            <input type="button" value="Update" class="btn-primary" onclick="location.href = '@Url.Action("Index", "Update", new { Taskid=@instance.Taskid})'" />

                            <a class="btn btn-danger btnLink" data-toggle="modal" data-target="#DangerModalalert_@count" data-item="@instance.Taskid"><i style="font-size:15px" class="fa fa-trash" aria-hidden="true"></i></a>
        <button type="button" class="btn-primary btnLink" data-toggle="modal" name="btnLink" id="btnLink" data-target="#DangerModalalert_@count" data-item="@instance.Taskid">Delete</button>

        <div id="DangerModalalert_@count" class="modal modal-edu-general FullColor-popup-DangerModal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-close-area modal-close-df">
                        <a class="close" data-dismiss="modal" href="#"><i class="fa fa-close"></i></a>
                    </div>
                    <div class="modal-body">
                        <span class="educate-icon educate-danger modal-check-pro information-icon-pro"></span>
                    </div>
                    <div class="modal-footer danger-md">
                        <a data-dismiss="modal" href="#">Cancel</a>
                        <a style="background-color:red" href="@Url.Action("Delete", "View", new { Taskid=@instance.Taskid})">Delete</a>
                    </div>
                </div>
            </div>
        </div>
        </div>
        </div>

        </td>
        </tr>
            ++count;

        }
        </tbody>*@




        <tbody>
            @{ int count = 1;}
            @foreach (var instance in Model)
            {

                ++count;
                <tr>
                    <td>@instance.Taskid</td>
                    <td>@instance.ShortDate</td>
                    <td>@instance.Hours</td>
                    <td>@instance.StringStatus</td>
                    <td>
                       

                        <input type="button" value="Update" class="btn-primary" onclick="location.href = '@Url.Action("Index", "Update", new { Taskid=@instance.Taskid})'" />

                       
                        <button type="button" class="btn-primary btnLink" name="btnLink" onclick="$('#DangerModalalert_@count').modal('show');" data-target="#DangerModalalert_@count" data-item="@instance.Taskid">Delete</button>

                        <div class="modal fade" id="DangerModalalert_@count" role="dialog">
                            <div class="modal-dialog err-pop" style="">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h3>Delete Task: @instance.Taskid</h3>
                                    </div>
                                    <div class="modal-body" style="text-align:center;">


                                        @using (Html.BeginForm())
                                        {


                                            <div>
                                                <br />


                                                <input type="button" value="Delete" class="btn-danger" onclick="location.href = '@Url.Action("Delete", "View", new { Taskid=@instance.Taskid})'" />

                                               

                                                <input type="button" value="Cancel" class="btn-primary" onclick="location.href = '@Url.Action("Index", "View")'" />


                                            </div>

                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>

                </tr>


            }
        </tbody>



    </table>
    <br />

    <br />


</center>

<script>
    var minDate, maxDate;



        // Custom filtering function which will search data in column four between two values
        $.fn.dataTable.ext.search.push(
            function (settings, data, dataIndex) {
                var min = minDate.val();
                var max = maxDate.val();
                var date = new Date(data[1]);

                if (
                    (min === null && max === null) ||
                    (min === null && date <= max) ||
                    (min <= date && max === null) ||
                    (min <= date && date <= max)
                ) {
                    return true;
                }
                return false;
            }
        );

        $(document).ready(function () {
            // Create date inputs
            minDate = new DateTime($('#min'), {
                format: 'MMMM Do YYYY'
            });
            maxDate = new DateTime($('#max'), {
                format: 'MMMM Do YYYY'
            });

            // DataTables initialisation
            var table = $('#view').DataTable();

            // Refilter the table
            $('#min, #max').on('change', function () {
                table.draw();
            });
            @*$(".btnLink").click(function () {
                $('#DangerModalalert_@count').modal('show');
            });*@
        });

</script>




